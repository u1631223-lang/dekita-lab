# コンポーネント別チケット一覧

> 目的リマインダー：すべてのチケットは「科学的根拠に基づいた『できた！』体験を持続させる」ことに直接貢献する。進捗更新時は必ず目的との整合を確認する。

## チケット運用ルール
- ステータスは `TODO / IN PROGRESS / REVIEW / DONE / BLOCKED` のいずれかを使用。
- `担当` と `更新日` を必ず記載し、変更時に履歴が追えるようコメントを残す。
- 進捗更新時は、該当セクションのステータスを変更し、必要に応じてメモ欄に補足を書く。
- 新規チケット追加時は、カテゴリ配下にチケットIDを採番し（例: HUB-04）、目的への貢献を明文化する。
- フェーズ移行とデプロイ準備は、依頼者のローカルテスト合格・指示が揃うまで絶対に着手しない。

---

## 1. アプリシェル & ハブ (`front/src/app`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| HUB-01 | ハブUIレイアウト初期実装 | DONE |  | 2024-04-13 | 子ども向けホーム画面でリズム/記憶ゲームへ遷移できる | ハブUI更新・サマリーカード追加 |
| HUB-02 | オンボーディング（保護者設定） | DONE |  | 2024-04-13 | 保護者が報酬演出を安全に調整できる | Onboardingモーダル＋保護者ゲート実装 |
| HUB-03 | 保護者ゲート＆設定ロック | DONE |  | 2024-04-13 | 設定画面へのアクセスに簡単な認証を要求 | CaregiverGateModal追加、報酬設定連携 |

---

## 2. コアエンジン (`front/src/core/engine`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| ENG-01 | セッションステートマシン設計 | DONE |  | 2024-04-13 | ラウンド遷移とタイマー制御がテストで確認できる | SessionMachine実装+Vitest整備 |
| ENG-02 | ゲームモジュール契約インターフェース | DONE |  | 2024-04-13 | `init/startRound/evaluate/cleanup` の型定義完了 | GameModule登録・ラウンド状態共有化 |
| ENG-03 | サービスワーカー連携ポイント | DONE |  | 2024-04-13 | セッション再開に必要な状態を永続化 | `usePwaRegistration` でPWA登録を自動化 |

---

## 3. 適応ロジック (`front/src/core/adaptive`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| ADP-01 | 成功率ベース難易度調整実装 | DONE |  | 2024-04-13 | 直近ラウンドから難易度が適切に上下するテスト作成 | adaptiveEngine作成 + テスト更新 |
| ADP-02 | 連続失敗時ヒント制御 | DONE |  | 2024-04-13 | 3連敗でヒント発火、成功まで難易度固定 | adaptiveEngineヒューリスティック実装 |
| ADP-03 | 反応時間トレンド計算 | DONE |  | 2024-04-13 | 指数平滑平均で反応時間を算出しUIに提供 | Telemetry summaryでreactionTrendMs算出 |
| ADP-04 | 制御付きランダム性マネージャ | DONE |  | 2024-04-13 | seed管理とカテゴリ重み付けシャッフルを提供 | ControlledRandomizer実装 |

---

## 4. 報酬システム (`front/src/core/rewards`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| RWD-01 | 音声・アニメーション共通API | DONE |  | 2024-04-13 | 成功時に0.5秒以内で効果発火 | RewardScheduler基盤実装 |
| RWD-02 | 変動比率報酬ロジック | DONE |  | 2024-04-13 | ストリーク閾値ごとに特別報酬が設定可能 | rewardTierマッピング実装 |
| RWD-03 | 報酬カスタマイズ設定 | DONE |  | 2024-04-13 | 保護者設定で音量・演出強度調整が可能 | useRewardSettingsStore＋Onboarding調整 |
| RWD-04 | 演出クールダウンとサプライズ管理 | DONE |  | 2024-04-13 | 連続発火を3秒以上空け、演出重複ガードを実装 | クールダウン/重複制御追加＋設定連動 |

---

## 5. テレメトリ & 永続化 (`front/src/core/telemetry`, `front/src/state`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| TLM-01 | 指標スキーマ定義 | DONE |  | 2024-04-13 | TypeScript型で成功率等を型安全に管理 | telemetry/types.ts更新 (reactionTrend含む) |
| TLM-02 | IndexedDB永続化レイヤー | DONE |  | 2024-04-13 | オフラインでセッションデータを保持できる | metricsStore + persist実装 |
| TLM-03 | 保護者ダッシュボードAPI | DONE |  | 2024-04-13 | UIに渡すための集計データ生成 | ハブサマリーカード表示用 summaryForGame 実装 |

---

## 6. リズムゲームモジュール (`front/src/modules/rhythm-tap`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| RTM-01 | パターン生成アルゴリズム | DONE |  | 2024-04-13 | 難易度別にテンポ・長さを出し分ける | GameModule経由でパターン生成＋テスト追加 |
| RTM-02 | タイミング評価ロジック | DONE |  | 2024-04-13 | 入力とのズレを±許容時間で判定 | RhythmTapScreenで判定処理洗練 |
| RTM-03 | ビジュアル＋音声シンク | DONE |  | 2024-04-13 | アニメーションとサウンドが同期 | 再生アニメ＆効果音連動実装 |

---

## 7. ペアマッチモジュール (`front/src/modules/pair-match`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| PMM-01 | カードセット設計 | DONE |  | 2024-04-13 | 難易度ごとに種類・配置を制御 | GameModule化＋createDeck整備 |
| PMM-02 | カード反転アニメーション | DONE |  | 2024-04-13 | 反転/一致演出がフレーム落ちなし | PairMatchScreen演出＆HUD追加 |
| PMM-03 | 記憶ヒント機能 | DONE |  | 2024-04-13 | 連続ミス時にヒント表示 | 自動/手動ヒント導入 |

---

## 8. 共通UI (`front/src/ui`)

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| UI-01 | HUDコンポーネント実装 | DONE |  | 2024-04-13 | 成功率・ストリーク・タイマー表示 | `GameHud` で統合表示 |
| UI-02 | 大型タッチボタンデザイン | DONE |  | 2024-04-13 | WCAG 2.1 AA準拠、誤タップ防止 | Rhythm/Pair ボタンに適用済み |
| UI-03 | 多言語対応UIテキスト | DONE |  | 2024-04-13 | `react-i18next`でJP/EN切替 | 新規UIテキストはすべて i18n 化 |
| UI-04 | 子ども向けモーション指針適用 | DONE |  | 2024-04-13 | アニメーション時間と移動量がガイドに準拠 | `prefers-reduced-motion` サポート追加 |

---

## 9. 品質保証 & ツールチェーン

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| QA-01 | ESLint/Prettier設定 | DONE |  | 2024-04-13 | CIでlintが通過する | front/設定＋ルートpackage.json整備 |
| QA-02 | 単体テスト整備（Vitest） | DONE |  | 2024-04-13 | コアロジックにテストが存在 | core/adaptive/telemetry/モジュールのテスト追加 |
| QA-03 | Playwrightスモークテスト | DONE |  | 2024-04-13 | 基本操作とアクセシビリティが検証 | `playwright.config.ts` と smoke テスト作成 |
| QA-04 | Storybookセットアップ | DONE |  | 2024-04-13 | コンポーネントカタログが閲覧可能 | HubCard stories 追加 |
| QA-05 | トラブルシュートログ運用フロー | DONE |  | 2024-04-13 | エラー発生時に `docs/troubleshooting.md` とログ更新が徹底 | Serena手順記載・ログテンプレ整備 |

---

## 10. ドキュメンテーション & 運用

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| DOC-01 | README（開発手順） | DONE |  | 2024-04-13 | 開発環境構築手順が明記 | README.md 更新 |
| DOC-02 | 設計資料保守フロー策定 | DONE |  | 2024-04-13 | docs更新ガイドラインを定義 | docs/maintenance.md 追加 |
| OPS-01 | Vercelデプロイ設定 | DONE |  | 2024-04-13 | プレビューURLが自動発行 | front/vercel.json 追加（未デプロイ） |
| DOC-03 | 体験設計ガイド整合チェック | DONE |  | 2024-04-13 | 実装変更時に `docs/experience-design.md` と注意事項を更新 | 報酬設定・ゲートの記録を追記 |
| DOC-04 | トラブルシュートガイド整備 | DONE |  | 2024-04-13 | `docs/troubleshooting.md` とログテンプレートを維持 | Serena活用メモを追加 |
## 11. 次期ミニゲーム計画

| ID | タイトル | ステータス | 担当 | 更新日 | 受け入れ基準 | メモ |
|----|-----------|------------|------|--------|---------------|------|
| NGM-01 | シーケンススパーク設計 | DONE |  | 2024-04-13 | `docs/game-concepts.md` の仕様に沿ってGameModule設計案をまとめる | 実装+画面追加済み |
| NGM-02 | かたちビルダー設計 | DONE |  | 2024-04-13 | ブロック配置UIと難易度遷移を定義したモジュール骨子を作成 | 実装+画面追加済み |
